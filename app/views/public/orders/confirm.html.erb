<div class="container p-3">
  <div class="row">
    <div class="col-md-8 mx-auto">
      <h2 class="mb-4" style="font-weight:bold; color:#A07B35; font-family:'Times New Roman'; font-size:45px;"><strong>Confirm order information</strong></h2>

      <div class="d-flex">
        <div>
          <table class="table border table-bordered", style="background-color: #fffaf0;">
            <tr style="background-color: #ccc8c0;">
              <td>商品名</td>
              <td>単価(税込)</td>
              <td>数量</td>
              <td>小計</td>
            </tr>
            <% @cart_items.each do |cart_item| %>
              <tr>
                <td>
                  <!--要素を垂直方向で中央に-->
                  <div class="d-flex align-items-center">
                    <%= image_tag cart_item.item.image, size: "100x80" %>
                    <div class="ml-3"><%= cart_item.item.name %></div>
                  </div>
                </td>
                <td class="align-middle"><%= number_with_delimiter(cart_item.item.price) %></td>
                <td class="align-middle"><%= cart_item.amount %></td>
                <td class="align-middle"><%= number_with_delimiter(cart_item.item.price*cart_item.amount) %></td>
              </tr>
            <% end %>
          </table>
        </div>
        <div class="ml-5">
          <table class="table border table-bordered", style="background-color: #fffaf0;">
            <tr>
              <td style="background-color: #ccc8c0;">送料</td>
              <td><%= @shipping_cost %></td>
            </tr>
            <tr>
              <td style="background-color: #ccc8c0;">商品合計</td>
              <td><%= number_with_delimiter(@cart_items_price) %></td>
            </tr>
            <tr>
              <td style="background-color: #ccc8c0;">請求額</td>
              <td><%= number_with_delimiter(@total_price) %></td>
            </tr>
          </table>
        </div>
      </div>

    <div class="col-md-8 d-flex align-items-center pt-3">
      <div><strong class = "p-1 pr-3">支払い方法</strong></div>
      <% if @selected_payment_method == "credit_card" %>
        <span class="pl-3">クレジットカード</span>
      <% else %>
        <span class="pl-3">銀行振込</span>
      <% end %>
    </div>
    <div class="col-md-8 d-flex align-items-center pt-3">
      <div><strong class = "p-1 pr-3">お届け先　</strong></div>
      <span class="pl-3">〒<%= @order.postal_code + " " + @order.address + " " + @order.name %></span>
    </div>

    <!--@orderモデルの属性に関する情報を含み、その情報は非表示のhiddenフィールドを使用して渡す-->
    <div class="col-md-12 pt-5 d-flex justify-content-center">
      <%= form_with model: @order, url: orders_path, local:true do |f|  %>
        <%= f.hidden_field :customer_id, value: current_customer.id %>
        <%= f.hidden_field :payment_method, value:  @order.payment_method %>
        <%= f.hidden_field :shipping_cost, value: @shipping_cost %>
        <%= f.hidden_field :postal_code, value: @order.postal_code %>
        <%= f.hidden_field :total_price, value: @cart_items_price %>
        <%= f.hidden_field :address, value: @order.address%>
        <%= f.hidden_field :name, value: @order.name %>
        <%= f.hidden_field :status, value: "awaiting_payment" %>
        <%= f.submit "注文を確定する", class: "btn btn-success" %>
      <% end %>
    </div>

  </div>
</div>